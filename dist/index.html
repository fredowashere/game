<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <canvas id="canvas"></canvas>
    <script type="module">
        import { Engine } from "./engine.js";
        import { FIRST_MAP } from "./example-map.js";

        window.requestAnimFrame =
            window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.oRequestAnimationFrame ||
            window.msRequestAnimationFrame ||
            function (callback) {
                return window.setTimeout(callback, 1000 / 60);
            };

        var canvas = document.getElementById('canvas'),
            ctx = canvas.getContext('2d');

        canvas.width = 400;
        canvas.height = 400;

        var game = new Engine();
        game.context = ctx;
        game.viewport[0] = canvas.width;
        game.viewport[1] = canvas.height;
        game.loadMap(FIRST_MAP);

        /* Limit the viewport to the confines of the map */
        game.limit_viewport = true;

        var Loop = function () {

            ctx.fillStyle = '#333';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            game.drawMap(0);
            game.drawPlayer();
            game.updatePlayer();
            game.movePlayer();

            window.requestAnimFrame(Loop);
        };

        Loop();
    </script>
</body>

</html>